<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Doramon</title>
    <style>
        .error {
            color: red;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <button id="shaowpop">pop</button>
    <form action="jquery_validation.html" id="register">
<div>
    <label for="name">fullname</label>
    <input type="text" id="name" name="name" required>
</div>

<div>
    <label for="">Email:</label>
    <input type="text" id="email" name="email" required>
</div>

<div>
    <label for="">Tel</label>
    <input type="tel" id="tel" name="tel">
</div>

<div></div>
    <label for="">ID Card</label>
    <input type="text" id="idcard" name="idcard">
</div>

<div>
    <button type="submit">Submit</button>
</div>
    
    

    
    
    </form>

    <script src="jquery-3.7.1.min.js"></script>
    <script src="jquery-validate/jquery.validate.min.js"></script>
    <script src="jquery-validate/additional-methods.min.js"></script>
    <script>
        $(function() {
            $("form#shaowpop").click(function() {
                $('form#register').show();
            });
        });
    </script>

    <Script>
        jQuery.validator.addMethod(
            "chackIDCard",
            function(value, element) {
                var pid = value;
                pid = pid.toString().replace(/\D/g, "");
                if (pid.length === 13) {
                    var sum = 0;
                    for (var i = 0; i < pid.length - 1; i++) {
                        sum += Number(pid.charAt(i)) * (pid.length - i);
                    }
                    var last_digit = (11 - sum % 11) % 10;
                    $(element).val(pid);
                    return pid.charAt(12) == last_digit;
                } else {
                    return false;
                }
            },
            "รหัสประจำตัวประชาชนไม่ถูกต้อง"
        );


        $("form#register").validate({
            rules:{
                fullname: {
                    required: true
                },
                email: {
                    required: true,
                    email: true
                },
                tel: {
                    required: true,
                    number: true
                },
                idcard: {
                    required: true,
                    chackIDCard: true
                }
            },
            messages: {
                fullname: {
                    required: "ต้องใส่ชื่อก่อน",
                },
                email: {
                    required: "ต้องใส่อีเมลก่อน",
                },
                tel: {
                    required: "ต้องใส่เบอร์โทรก่อน",
                },
                idcard: {
                    required: "ต้องใส่รหัสประจำตัวประชาชนก่อน",
                },

            errorPlacement: function(error, element) {
                error.appendTo(element.parent())
                error.appendTo('.help-block');
             }
            },

            submitHandler: function(form){
              /*  $.post('testpost.html', function(data){
                    alert(data)
                })*/
               $.get('testpost.html', function(data){
                    alert(data)
                });
                $("form#register").trigger("reset");

                $("#fullname").focus();

            }
        
        })
    </Script>
</body>
</html>